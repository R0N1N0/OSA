<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OSA Academia</title>
    <link rel="stylesheet" href="../css/style.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      src="https://kit.fontawesome.com/0da2217e8f.js"
      crossorigin="anonymous"
    ></script>
    <link
      rel="shortcut icon"
      type="image/jpg"
      href="../img/OSA_normalLogo.png"
      sizes="32x32"
    />
  </head>
  <body
    class="bg-slate-950 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)"
  >
    <header></header>

    <!-- menu lateral  -->
    <section
      class="academy leading-5 w-auto relative flex items-center top-24 h-auto"
    >
      <nav
        class="w-64 menuLateral h-screen top-24 fixed flex flex-col items-center"
      >
        <ul class="flex flex-col mt-12">
          <li class="mt-2 tab-controller active" name="nmap">
            <i class="fa-regular fa-map"></i> Nmap
          </li>
          <li class="mt-2 tab-controller" name="metasploit">
            <i class="fa-solid fa-shield-halved"></i> Metasploit
          </li>
          <li class="mt-2 tab-controller" name="grupos">
            <i class="fa-solid fa-users"></i> Grupos
          </li>
          <li class="mt-2 tab-controller" name="invitaciones">
            <i class="fa-solid fa-user-plus"></i> Invitaciones
          </li>
          <li class="mt-2 tab-controller" name="ranking">
            <i class="fa-solid fa-bolt"></i> Ranking
          </li>
        </ul>
      </nav>

      <!--------------------- NMAP --------------------->
      <article
        class="ml-64 nmap tab pl-12 pt-12 w-full flex flex-row flex-wrap justify-center gap-10 mb-12"
      >
        <header class="header flex justify-between w-full">
          <h3 class="text-3xl color-text flex flex-row items-center">
            <img
              class="size-20 mr-4"
              src="https://www.kali.org/tools/nmap/images/nmap-logo.svg"
              alt="nmap logo"
            />
            Nmap
          </h3>
        </header>
        <div class="w-4/5 alert flex justify-center flex-wrap"></div>
        <article
          class="w-full h-full flex flex-row flex-wrap justify-center gap-10"
        >
          <article class="h-full w-full">
            <span class="text-2xl color-third"> ¿Qué es Nmap? </span>
            <p class="academyBox mt-6 text-lg">
              <strong class="color-secondary"> Nmap o Network Mapper </strong>
              es una de las herramientas más utilizadas en el mundo del hacking,
              ya que permite realizar exploraciones de redes y auditorías de
              seguridad. Nmap es una herramienta de código abierto creada por el
              equipo del mismo nombre. Está escrita en su mayoría por lenguaje
              C, C++ y Lua
              <strong class="color-secondary">
                <a target="_blank" href="https://nmap.org/"
                  >(https://nmap.org/)</a
                ></strong
              >. Su funcionalidad más interesante es la del escaneo masivo de
              dispositivos en una red, junto a los servicios, sistemas
              operativos y cortafuegos que utilizan. Nmap también cuenta con
              decenas de opciones para personalizar el escaneo de dispositivos (
              <strong class="color-secondary"> -A </strong> para detectar
              versiones, sistemas operativos, puertos, etc.
              <strong class="color-secondary"> -sL </strong> para detectar
              objetivos…).
            </p>
          </article>

          <article class="h-full w-full">
            <span class="text-2xl color-third"> Ejemplos </span>

            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Para poder escanear máquinas virtuales (CTF) en la red,
                utilizaremos
                <strong class="color-secondary">
                  nmap [IP de red / CIDR]
                </strong>
              </p>
              <img src="../img/nmap7.png" alt="ejemplos de nmap" />
              <p class="academyResumen">
                Ejemplo básico de nmap. Aqui se muestran las IPs de las máquinas
                virtuales, junto a los puertos abiertos. La red es 200.200.10.0
                y el bloque CIDR /24
              </p>
            </div>

            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Normalmente saldrán varias IPs, y un listado de puertos abiertos
                por cada una de estas. Los puertos más comunes, y que pueden
                indicar la presencia de una máquina virtual CTF, son el puerto
                22 de TCP (SSH) para conectarse remotamente; y 80 de TCP (HTTP)
                por alguna página web que se está hospedando en la máquina
                destino.
              </p>
              <img src="../img/nmap6.png" alt="ejemplos de nmap" />
              <p class="academyResumen">
                Potencial candidato de ser un CTF, ya que tiene los dos puertos
                mencionados anteriormente.
              </p>
            </div>
            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Para poder saber más información sobre los sistemas, podemos
                poner la IP del sistema junto a diversas banderas o
                <strong class="color-secondary"> “flags” </strong> en la
                terminal. Una muy interesante es la
                <strong class="color-secondary"> -sV </strong>, para saber la
                versión de los servicios.
              </p>
              <img src="../img/nmap4.png" alt="ejemplos de nmap" />
              <p class="academyResumen">
                Esta máquina Windows Server, por ejemplo, tiene un Active
                Directory abierto, y podemos saber el nombre del dominio, la
                dirección MAC y cuánto tiempo lleva activa por el servicio de
                Kerberos
              </p>
            </div>
            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Con <strong class="color-secondary"> -O </strong>, podemos saber
                el sistema operativo de la máquina con la IP especificada:
              </p>
              <img src="../img/nmap3.png" alt="ejemplos de nmap" />
              <p class="academyResumen">
                En este caso, nos encontramos ante una máquina virtual que
                utiliza Linux 4 o Linux 5, gracias a su kernel.
              </p>
            </div>
            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Otra opción muy interesante es la de
                <strong class="color-secondary"> –script </strong>, la cual nos
                permite ejecutar un script de LUA para poder detectar cosas más
                específicas. Casi todos los scripts están hechos y mantenidos
                por la comunidad y hay de muchos tipos. Algunos de los que nos
                pueden ser más útiles a la hora de resolver máquinas son los
                scripts que detectan vulnerabilidades. Ejemplos de estos son
                <strong class="color-secondary">vulscan, vulners, etc.</strong>
              </p>
              <img src="../img/nmap1.png" alt="ejemplos de nmap" />
              <p class="academyResumen">
                Podemos observar distintos tipos de vulnerabilidades y exploits
                de Apache2 encontrados en esta máquina.
              </p>
            </div>
            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Si detectamos algún cortafuegos en la máquina objetivo, podemos
                emplear técnicas de evasión como fragmentar los paquetes de IP a
                la hora de detectar máquinas, crear IPs falsas mediante spoofing
                para complicar la detección de nuestra IP con
                <strong class="color-secondary"> -S </strong> o incluso crear
                señuelos con <strong class="color-secondary"> -D </strong> para
                que el IDS o cortafuegos crea que se están realizando escaneos
                desde distintos lugares.
              </p>
              <img src="../img/nmap2.png" alt="ejemplos de nmap" />
              <p class="academyResumen">
                En el ejemplo, se puede ver como se utilizan 3 IPs como señuelo,
                seguida de “ME”, que es nuestra IP real. Si no ponemos nuestra
                IP, no se podrá realizar el escaneo.
              </p>
            </div>
          </article>
          <article class="w-full h-full">
            <span class="text-2xl color-third"> Resumen </span>
            <div class="academyBox">
              <p class="text-lg academyResumen m-0">Para finalizar, y como curiosidad, Nmap es una herramienta tan popular que incluso ha aparecido en la gran pantalla, en películas como Matrix Reloaded, Dredd, Snowden, Elysium, Los Cuatro Fantásticos, etc.</p>
            </div>
          </article>
        </article>
      </article>

      <!-------------------METASPLOIT----------------------->

      <article
        class="ml-64 metasploit tab hidden pl-12 pt-12 w-full flex flex-row flex-wrap justify-center gap-10 mb-12"
      >
        <header class="header flex justify-between w-full">
          <h3 class="text-3xl color-text flex flex-row items-center">
            <img
                    class="size-20 mr-4"
                    src="https://atomrace.com/blog/wp-content/uploads/2017/10/metasploit-logo.png"
                    alt="metasploit logo"
            />
            Metasploit
          </h3>
        </header>
        <div class="w-4/5 alert flex justify-center flex-wrap"></div>
        <article
                class="w-full h-full flex flex-row flex-wrap justify-center gap-10"
        >
          <article class="h-full w-full">
            <span class="text-2xl color-third"> ¿Qué es Metasploit? </span>
            <p class="academyBox mt-6 text-lg">
              <strong class="color-secondary">Metasploit Framework o Metasploit </strong>
              para abreviar, es una herramienta muy popular en el mundo del hacking, pues permite automatizar y agilizar
              el pentesting (tests de intrusión) en todo tipo de servicios y dispositivos. Esta herramienta, por lo tanto,
              puede ayudar al descubrimiento de vulnerabilidades y a sus posibles vías de explotación.
              Este proyecto fue creado en 2003 por HD Moore utilizando el lenguaje de programación Perl, aunque en 2007
              fue reescrito en Ruby y posteriormente adquirido por Rapid7
              <strong class="color-secondary">
                <a target="_blank" href="https://www.metasploit.com/"
                >(https://www.metasploit.com/)</a
                ></strong
              >. Metasploit Framework consta de cuatro partes principales:
              <strong class="color-secondary">Las interfaces, las bibliotecas, los módulos y los añadidos.</strong>
            </p>
            <p class="academyBox mt-6 text-lg">
              - <strong class="color-secondary">Las interfaces</strong> son la manera de acceder al entorno de Metasploit. La más empleada y que vamos a
              utilizar más adelante es MSFconsole (uso de la consola).
              <br>
              <br>
              - <strong class="color-secondary">Las bibliotecas o APIs</strong> son conjuntos de instrucciones que dan forma a la sintaxis de Metasploit.
              Se utilizan tres: MSFCore, MSF y REX.
              <br>
              <br>
              - <strong class="color-secondary">Los añadidos o plugins</strong> son creados por la comunidad y sirven para extender las capacidades de Metasploit.
              Algunos ejemplos son nexpose o nessus para poder integrar estos buscadores de vulnerabilidades con Metasploit,
              lab para controlar distintas máquinas virtuales, etc.
              <br>
              <br>
              - <strong class="color-secondary">Los módulos</strong> son otra parte esencial de Metasploit, y definen el
              ámbito de la tarea que se quiere realizar. Hay de 6 tipos:
              <br>
              <br>
              <sub class="academySpanTab"><strong class="color-secondary">- Exploits:</strong> Estos son comandos o vectores de entrada que permiten acceder al sistema o aplicación de destino, aprovechándose de vulnerabilidades.
              <br><strong class="color-secondary ">- Payloads:</strong> Estas son las cargas maliciosas de nuestra intrusión. Son fragmentos de código que se ejecutarán en la máquina o servicio atacado después del exploit.
              <br><strong class="color-secondary">- Post Explotación:</strong> Permiten realizar pruebas adicionales después de ya tener acceso al objetivo.
              <br><strong class="color-secondary">- Encoders:</strong> Cifran el contenido malicioso para intentar evadir cortafuegos y sistemas de detección y prevención de intrusiones.
              <br><strong class="color-secondary">- Auxiliaries:</strong> Son tipos de módulos sin una categoría concreta.
              <br><strong class="color-secondary">- NOPs:</strong> Generan secuencias de bytes aleatorias, para confundir a los IDS e IPS.</sub>
            </p>

          </article>
          <article class="h-full w-full">
            <span class="text-2xl color-third"> Ejemplos </span>

            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Todo comienza escribiendo en la terminal <strong class="color-secondary ">sudo msfconsole</strong>. Nos aparecerá
                un bonito logo seguido de una interfaz para poner los comandos.
              </p>
              <img src="../img/msploit1.png" alt="ejemplos de metasploit" />
              <p class="academyResumen">
                Ejemplo de Metasploit Framework Console. Aquí empieza la magia.
              </p>
            </div>

            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Si queremos escanear la red en busca de nuestra máquina objetivo (Metasploitable 3), podemos ejecutar Nmap como en
                el tutorial anterior, o podemos utilizar algún módulo de Metasploit. En nuestro caso, ya que es una guía de uso, vamos
                a hacerlo con este último, más concretamente con el módulo <strong class="color-secondary ">auxiliary/scanner/discovery/arp_sweep</strong>.
                Para utilizar cualquier módulo podemos escribir <strong class="color-secondary ">use</strong> seguido del nombre.
                Podemos también saber los parámetros con <strong class="color-secondary ">info</strong>.
              </p>
              <img src="../img/msploit2.png" alt="ejemplos de metasploit" />
              <p class="academyResumen">
                  Se puede observar que necesitamos poner la opción RHOSTS.
              </p>
            </div>

            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Como necesitamos la opción RHOSTS como mínimo, vamos a ponerla con <strong class="color-secondary ">set RHOSTS (ip de red) </strong>.
                En ip de red, ponemos nuestra ip, seguida del bloque CIDR (en este caso, 200.200.10.0/24)
                <br>
                Para finalizar, podemos arrancar nuestro script con <strong class="color-secondary ">run</strong>.
              </p>
              <img src="../img/msploit3.png" alt="ejemplos de metasploit" />
              <p class="academyResumen">
                Aquí nos salen varios resultados. Las 3 primeras son de los routers NAT de VirtualBox, por lo tanto, tiene que set la 4a IP
                (200.200.10.11)
              </p>
            </div>

            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Ahora que ya tenemos nuestra IP objectivo, podemos probar a buscar servicios que puedan ser vulnerados. Un módulo muy interesante
                es el de <strong class="color-secondary ">auxiliary/scanner/portscan/syn</strong>, el cual enviará paquetes de TCP con la flag "SYN"
                a todos los puertos de una máquina. Si reciben respuesta para establecer la conexión, sabremos que existen.
                Este módulo también necesita <strong class="color-secondary ">RHOSTS</strong> para saber la IP(s) de destino,
                así que se la ponemos de igual manera y lo arrancamos.
              </p>
              <img src="../img/msploit4.png" alt="ejemplos de metasploit" />
              <p class="academyResumen">
                Si esperamos un rato, saldrán una serie de puertos. En este tutorial intentaremos explotar el 21 (FTP).
                FTP es un protocolo de transferencia de archivos, así que podemos pasar un archivo malicioso para poder controlar la máquina desde fuera.
              </p>
            </div>

            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Podemos atacar a FTP con el <strong class="color-secondary ">exploit de proftpd_modcopy_exec</strong>
                para generar una terminal interactiva con netcat. El exploit se encuentra en <strong class="color-secondary ">
                exploit/unix/ftp/proftpd_modcopy_exec</strong>
              </p>
              <img src="../img/msploit5.png" alt="ejemplos de metasploit" />
              <img src="../img/msploit6.png" alt="ejemplos de metasploit" />
              <p class="academyResumen">
                Aquí podemos ver que necesitamos poner el RHOSTS, y que por defecto utilizará la carga de netcat para hacer una connexión inversa.
                También hay que cambiar el directorio SITEPATH a /var/www/html
              </p>
            </div>

            <div class="academyBox">
              <p class="academyBox p-0 mb-6 text-lg">
                Finalmente, ponemos el valor de <strong class="color-secondary ">RHOSTS</strong> a la IP de la máquina,
                y <strong class="color-secondary ">SITEPATH</strong> a donde se encuentra la página web
                <strong class="color-secondary ">(/var/www/html)</strong>
              </p>
              <img src="../img/msploit7.png" alt="ejemplos de metasploit" />
              <img src="../img/msploit8.png" alt="ejemplos de metasploit" />
              <p class="academyResumen">
                Si lo ejecutamos, ya tenemos una connexión inversa con la víctima, a partir de aquí se puede hacer side-stepping para encontrar
                otros usuarios o hacer una escalada de privilegios.
              </p>
            </div>

          </article>
          <article class="w-full h-full">
            <span class="text-2xl color-third"> Resumen </span>
            <div class="academyBox">
              <p class="text-lg academyResumen m-0">Para finalizar, y como curiosidad, Metasploit cuenta en la actualidad
                com más de 5500 modulos y más de 10000 colaboradores, y es tan poderoso que su uso está limitado en certificaciones como OSCP.
                En este tutorial solo mencionamos una pequeña parte del gran potencial de esta herramienta.</p>
            </div>
          </article>
        </article>
      </article>
    </section>
  </body>
  <script src="../js/helpers/sidebarLogic.js"></script>
  <script type="module" src="../js/helpers/menuLogic.js"></script>
</html>
